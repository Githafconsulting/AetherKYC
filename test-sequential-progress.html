<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Sequential Progress</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-container { max-width: 600px; margin: 0 auto; }
        .stage { padding: 15px; margin: 10px 0; border-radius: 8px; display: flex; align-items: center; }
        .stage.pending { background: #f3f4f6; color: #6b7280; }
        .stage.active { background: #dbeafe; color: #1d4ed8; border: 2px solid #3b82f6; }
        .stage.completed { background: #dcfce7; color: #166534; border: 2px solid #22c55e; }
        .icon { width: 24px; height: 24px; margin-right: 12px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; }
        .icon.pending { background: #9ca3af; }
        .icon.active { background: #3b82f6; animation: pulse 2s infinite; }
        .icon.completed { background: #22c55e; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress { height: 8px; background: #e5e7eb; border-radius: 4px; margin: 20px 0; }
        .progress-bar { height: 100%; background: #3b82f6; border-radius: 4px; transition: width 0.5s ease; }
        button { padding: 12px 24px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer; margin: 10px 5px; }
        button:hover { background: #2563eb; }
        .info { background: #f3f4f6; padding: 15px; border-radius: 8px; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Sequential Progress Test</h1>
        <p>This simulates the mobile app submission holding screen with sequential stage progression.</p>

        <div class="info">
            <strong>Expected Flow:</strong>
            <ol>
                <li>Reviewing Application (3 seconds) â†’ Green checkmark</li>
                <li>Verifying Documents (3 seconds) â†’ Green checkmark</li>
                <li>Compliance Check (3 seconds) â†’ Green checkmark</li>
                <li>Account Setup (3 seconds) â†’ Green checkmark</li>
            </ol>
        </div>

        <div class="progress">
            <div class="progress-bar" id="progressBar" style="width: 0%"></div>
        </div>
        <div id="progressText">0% Complete</div>

        <div id="stages">
            <div class="stage pending" id="stage-0">
                <div class="icon pending" id="icon-0">1</div>
                <div>
                    <strong>Reviewing Application</strong><br>
                    <span id="task-0">Processing and extracting information from your documents</span>
                </div>
            </div>
            <div class="stage pending" id="stage-1">
                <div class="icon pending" id="icon-1">2</div>
                <div>
                    <strong>Verifying Documents</strong><br>
                    <span id="task-1">Validating identity and document authenticity</span>
                </div>
            </div>
            <div class="stage pending" id="stage-2">
                <div class="icon pending" id="icon-2">3</div>
                <div>
                    <strong>Compliance Check</strong><br>
                    <span id="task-2">Performing regulatory compliance verification</span>
                </div>
            </div>
            <div class="stage pending" id="stage-3">
                <div class="icon pending" id="icon-3">4</div>
                <div>
                    <strong>Account Setup</strong><br>
                    <span id="task-3">Creating your banking account and credentials</span>
                </div>
            </div>
        </div>

        <button onclick="startSequentialProgress()">Start Sequential Progress</button>
        <button onclick="resetProgress()">Reset</button>

        <div id="result" style="margin-top: 20px;"></div>
    </div>

    <script>
        let currentStage = -1;
        let totalStages = 4;
        let isRunning = false;

        const stages = [
            { name: 'Reviewing Application', activeTask: 'Processing your documents...', completedTask: 'Documents processed successfully' },
            { name: 'Verifying Documents', activeTask: 'Verifying your identity...', completedTask: 'Identity verified successfully' },
            { name: 'Compliance Check', activeTask: 'Running compliance checks...', completedTask: 'Compliance check passed successfully' },
            { name: 'Account Setup', activeTask: 'Setting up your account...', completedTask: 'Account created successfully' }
        ];

        function updateProgress() {
            const progress = ((currentStage + 1) / totalStages) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = Math.round(progress) + '% Complete';
        }

        function setStageState(index, state) {
            const stageEl = document.getElementById(`stage-${index}`);
            const iconEl = document.getElementById(`icon-${index}`);
            const taskEl = document.getElementById(`task-${index}`);

            // Remove all state classes
            stageEl.className = 'stage';
            iconEl.className = 'icon';

            // Add new state
            stageEl.classList.add(state);
            iconEl.classList.add(state);

            if (state === 'active') {
                taskEl.textContent = stages[index].activeTask;
                iconEl.textContent = 'âš¡';
            } else if (state === 'completed') {
                taskEl.textContent = stages[index].completedTask;
                iconEl.textContent = 'âœ“';
            } else {
                taskEl.textContent = stages[index].name.split(' ').slice(1).join(' ').toLowerCase();
                iconEl.textContent = index + 1;
            }
        }

        function processStage(index) {
            if (index >= totalStages) {
                // All stages complete
                updateProgress();
                document.getElementById('result').innerHTML = `
                    <div style="background: #dcfce7; color: #166534; padding: 15px; border-radius: 8px;">
                        <strong>ðŸŽ‰ Application Processing Complete!</strong><br>
                        Account created successfully. Welcome to your new banking account!
                    </div>
                `;
                isRunning = false;
                return;
            }

            currentStage = index;

            // Set current stage as active
            setStageState(index, 'active');
            updateProgress();

            console.log(`Stage ${index + 1}: ${stages[index].name} - Active`);

            // Complete after 3 seconds
            setTimeout(() => {
                setStageState(index, 'completed');
                updateProgress();
                console.log(`Stage ${index + 1}: ${stages[index].name} - Completed`);

                // Move to next stage after brief pause
                setTimeout(() => {
                    processStage(index + 1);
                }, 500);

            }, 3000);
        }

        function startSequentialProgress() {
            if (isRunning) {
                console.log('Progress already running');
                return;
            }

            isRunning = true;
            resetProgress();
            document.getElementById('result').innerHTML = '<div style="color: #3b82f6;">Starting application processing...</div>';

            console.log('ðŸŽ­ Starting sequential stage progression');
            processStage(0);
        }

        function resetProgress() {
            isRunning = false;
            currentStage = -1;

            for (let i = 0; i < totalStages; i++) {
                setStageState(i, 'pending');
            }

            updateProgress();
            document.getElementById('result').innerHTML = '';
            console.log('Progress reset');
        }

        // Auto-start on page load
        window.onload = () => {
            console.log('Page loaded, ready to test sequential progress');
        };
    </script>
</body>
</html>